(self.webpackChunkpaper_editor=self.webpackChunkpaper_editor||[]).push([[1899],{2818:function(e,t,o){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorContentManager=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var u=i?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}o.default=e,t&&t.set(e,o);return o}(o(36640)),r=o(25282);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){c(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onContentChanged=function(e){o._suppress||e.changes.forEach((function(e){return o._processChange(e)}))},this._options=a(a({},e._DEFAULTS),t),r.Validation.assertDefined(this._options,"options"),r.Validation.assertDefined(this._options.editor,"options.editor"),r.Validation.assertFunction(this._options.onInsert,"options.onInsert"),r.Validation.assertFunction(this._options.onReplace,"options.onReplace"),r.Validation.assertFunction(this._options.onDelete,"options.onDelete"),this._disposer=this._options.editor.onDidChangeModelContent(this._onContentChanged)}var t,o,n;return t=e,(o=[{key:"insert",value:function(e,t){this._suppress=!0;var o=this._options,n=o.editor,r=o.remoteSourceId,s=n.getModel().getPositionAt(e);n.executeEdits(r,[{range:new i.Range(s.lineNumber,s.column,s.lineNumber,s.column),text:t,forceMoveMarkers:!0}]),this._suppress=!1}},{key:"replace",value:function(e,t,o){this._suppress=!0;var n=this._options,r=n.editor,s=n.remoteSourceId,u=r.getModel().getPositionAt(e),a=r.getModel().getPositionAt(e+t);r.executeEdits(s,[{range:new i.Range(u.lineNumber,u.column,a.lineNumber,a.column),text:o,forceMoveMarkers:!0}]),this._suppress=!1}},{key:"delete",value:function(e,t){this._suppress=!0;var o=this._options,n=o.editor,r=o.remoteSourceId,s=n.getModel().getPositionAt(e),u=n.getModel().getPositionAt(e+t);n.executeEdits(r,[{range:new i.Range(s.lineNumber,s.column,u.lineNumber,u.column),text:"",forceMoveMarkers:!0}]),this._suppress=!1}},{key:"dispose",value:function(){this._disposer.dispose()}},{key:"_processChange",value:function(e){r.Validation.assertDefined(e,"change");var t=e.rangeOffset,o=e.rangeLength,n=e.text;if(n.length>0&&0===o)this._options.onInsert(t,n);else if(n.length>0&&o>0)this._options.onReplace(t,o,n);else{if(!(0===n.length&&o>0))throw new Error("Unexpected change: "+JSON.stringify(e));this._options.onDelete(t,o)}}}])&&l(t.prototype,o),n&&l(t,n),e}();t.EditorContentManager=f,f._DEFAULTS={onInsert:function(){},onReplace:function(){},onDelete:function(){},remoteSourceId:"remote"}},88855:function(e,t){"use strict";function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteCursor=void 0;var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._delegate=t}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._delegate.getId()}},{key:"getPosition",value:function(){return this._delegate.getPosition().position}},{key:"setPosition",value:function(e){this._delegate.setPosition(e)}},{key:"setOffset",value:function(e){this._delegate.setOffset(e)}},{key:"show",value:function(){this._delegate.show()}},{key:"hide",value:function(){this._delegate.hide()}},{key:"isDisposed",value:function(){return this._delegate.isDisposed()}},{key:"dispose",value:function(){this._delegate.dispose()}}])&&o(t.prototype,n),i&&o(t,i),e}();t.RemoteCursor=n},93398:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteCursorManager=void 0;var n=o(88855),i=o(4846),r=o(25282);function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"!==c(t))throw new Error("'options' is a required parameter and must be an object.");if(void 0===(t=u(u({},e.DEFAULT_OPTIONS),t)).editor||null===t.editor)throw new Error("options.editor must be defined but was: ".concat(t.editor));this._options=t,this._cursorWidgets=new Map,this._nextWidgetId=0}var t,o,s;return t=e,(o=[{key:"addCursor",value:function(e,t,o){var s=this;r.Validation.assertString(e,"id"),r.Validation.assertString(t,"color"),this._options.tooltips;var u=""+this._nextWidgetId++,a=1e3*this._options.tooltipDuration,c=new i.RemoteCursorWidget(this._options.editor,u,t,o,this._options.tooltips,a,(function(){return s.removeCursor(e)}));return this._cursorWidgets.set(e,c),new n.RemoteCursor(c)}},{key:"removeCursor",value:function(e){r.Validation.assertString(e,"id");var t=this._getCursor(e);t.isDisposed()||t.dispose(),this._cursorWidgets.delete(e)}},{key:"setCursorPosition",value:function(e,t){r.Validation.assertString(e,"id"),this._getCursor(e).setPosition(t)}},{key:"setCursorOffset",value:function(e,t){r.Validation.assertString(e,"id"),this._getCursor(e).setOffset(t)}},{key:"showCursor",value:function(e){r.Validation.assertString(e,"id"),this._getCursor(e).show()}},{key:"hideCursor",value:function(e){r.Validation.assertString(e,"id"),this._getCursor(e).hide()}},{key:"_getCursor",value:function(e){if(!this._cursorWidgets.has(e))throw new Error("No such cursor: "+e);return this._cursorWidgets.get(e)}}])&&l(t.prototype,o),s&&l(t,s),e}();t.RemoteCursorManager=f,f.DEFAULT_OPTIONS={tooltips:!0,tooltipDuration:1}},4846:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteCursorWidget=void 0;var n=o(36640),i=o(2818),r=o(25282);function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function c(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,o,r,s,u,a,c){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onInsert=function(e,t){if(null!==l._position){var o=l._offset;if(e<=o){var n=o+t.length,i=l._editor.getModel().getPositionAt(n);l._updatePosition(i)}}},this._onReplace=function(e,t,o){if(null!==l._position){var n=l._offset;if(e<=n){var i=n-Math.min(n-e,t)+o.length,r=l._editor.getModel().getPositionAt(i);l._updatePosition(r)}}},this._onDelete=function(e,t){if(null!==l._position){var o=l._offset;if(e<=o){var n=o-Math.min(o-e,t),i=l._editor.getModel().getPositionAt(n);l._updatePosition(i)}}},this._editor=t,this._tooltipDuration=a,this._id="monaco-remote-cursor-".concat(o),this._onDisposed=c;var f,d=("function"==typeof(f=this._editor).getConfiguration?f.getConfiguration():{lineHeight:f.getOption(n.editor.EditorOption.lineHeight)}).lineHeight;this._domNode=document.createElement("div"),this._domNode.className="monaco-remote-cursor",this._domNode.style.background=r,this._domNode.style.height="".concat(d,"px"),u?(this._tooltipNode=document.createElement("div"),this._tooltipNode.className="monaco-remote-cursor-tooltip",this._tooltipNode.style.background=r,this._tooltipNode.innerHTML=s,this._domNode.appendChild(this._tooltipNode),this._scrollListener=this._editor.onDidScrollChange((function(){l._updateTooltipPosition()}))):(this._tooltipNode=null,this._scrollListener=null),this._contentManager=new i.EditorContentManager({editor:this._editor,onInsert:this._onInsert,onReplace:this._onReplace,onDelete:this._onDelete}),this._hideTimer=null,this._editor.addContentWidget(this),this._offset=-1,this._disposed=!1}var t,o,s;return t=e,(o=[{key:"hide",value:function(){this._domNode.style.display="none"}},{key:"show",value:function(){this._domNode.style.display="inherit"}},{key:"setOffset",value:function(e){r.Validation.assertNumber(e,"offset");var t=this._editor.getModel().getPositionAt(e);this.setPosition(t)}},{key:"setPosition",value:function(e){var t=this;r.Validation.assertPosition(e,"position"),this._updatePosition(e),null!==this._tooltipNode&&setTimeout((function(){return t._showTooltip()}),0)}},{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._editor.removeContentWidget(this),null!==this._scrollListener&&this._scrollListener.dispose(),this._contentManager.dispose(),this._disposed=!0,this._onDisposed())}},{key:"getId",value:function(){return this._id}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._position}},{key:"_updatePosition",value:function(e){this._position={position:u({},e),preference:[n.editor.ContentWidgetPositionPreference.EXACT]},this._offset=this._editor.getModel().getOffsetAt(e),this._editor.layoutContentWidget(this)}},{key:"_showTooltip",value:function(){var e=this;this._updateTooltipPosition(),null!==this._hideTimer?clearTimeout(this._hideTimer):this._setTooltipVisible(!0),this._hideTimer=setTimeout((function(){e._setTooltipVisible(!1),e._hideTimer=null}),this._tooltipDuration)}},{key:"_updateTooltipPosition",value:function(){this._domNode.offsetTop-this._editor.getScrollTop()-this._tooltipNode.offsetHeight<5?this._tooltipNode.style.top="".concat(this._tooltipNode.offsetHeight+2,"px"):this._tooltipNode.style.top="-".concat(this._tooltipNode.offsetHeight,"px"),this._tooltipNode.style.left="0"}},{key:"_setTooltipVisible",value:function(e){this._tooltipNode.style.opacity=e?"1.0":"0"}}])&&c(t.prototype,o),s&&c(t,s),e}();t.RemoteCursorWidget=l},77187:function(e,t,o){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteSelection=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var u=i?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}o.default=e,t&&t.set(e,o);return o}(o(36640)),r=o(25282);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){c(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t,o,n,i,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t,this._id=o;var u="monaco-remote-selection-".concat(n);this._className="monaco-remote-selection ".concat(u),this._styleElement=e._addDynamicStyleElement(u,i),this._label=r,this._decorations=[],this._onDisposed=s}var t,o,n;return t=e,n=[{key:"_addDynamicStyleElement",value:function(e,t){r.Validation.assertString(e,"className"),r.Validation.assertString(t,"color");var o=".".concat(e," {\n         background-color: ").concat(t,";\n       }").trim(),n=document.createElement("style");return n.innerText=o,document.head.appendChild(n),n}},{key:"_swapIfNeeded",value:function(e,t){return e.lineNumber<t.lineNumber||e.lineNumber===t.lineNumber&&e.column<=t.column?{start:e,end:t}:{start:t,end:e}}}],(o=[{key:"getId",value:function(){return this._id}},{key:"getStartPosition",value:function(){return a({},this._startPosition)}},{key:"getEndPosition",value:function(){return a({},this._endPosition)}},{key:"setOffsets",value:function(e,t){var o=this._editor.getModel().getPositionAt(e),n=this._editor.getModel().getPositionAt(t);this.setPositions(o,n)}},{key:"setPositions",value:function(t,o){var n=e._swapIfNeeded(t,o);this._startPosition=n.start,this._endPosition=n.end,this._render()}},{key:"show",value:function(){this._render()}},{key:"hide",value:function(){this._decorations=this._editor.deltaDecorations(this._decorations,[])}},{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._styleElement.parentElement.removeChild(this._styleElement),this.hide(),this._disposed=!0,this._onDisposed())}},{key:"_render",value:function(){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:new i.Range(this._startPosition.lineNumber,this._startPosition.column,this._endPosition.lineNumber,this._endPosition.column),options:{className:this._className,hoverMessage:null!=this._label?{value:this._label}:null}}])}}])&&l(t.prototype,o),n&&l(t,n),e}();t.RemoteSelection=f},24031:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteSelectionManager=void 0;var n=o(77187),i=o(25282);function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.Validation.assertDefined(t,"options"),this._remoteSelections=new Map,this._options=t,this._nextClassId=0}var t,o,s;return t=e,(o=[{key:"addSelection",value:function(e,t,o){var i=this,r=new n.RemoteSelection(this._options.editor,e,this._nextClassId++,t,o,(function(){i.removeSelection(e)}));return this._remoteSelections.set(e,r),r}},{key:"removeSelection",value:function(e){var t=this._getSelection(e);t.isDisposed()||t.dispose()}},{key:"setSelectionOffsets",value:function(e,t,o){this._getSelection(e).setOffsets(t,o)}},{key:"setSelectionPositions",value:function(e,t,o){this._getSelection(e).setPositions(t,o)}},{key:"showSelection",value:function(e){this._getSelection(e).show()}},{key:"hideSelection",value:function(e){this._getSelection(e).hide()}},{key:"_getSelection",value:function(e){if(!this._remoteSelections.has(e))throw new Error("No such selection: "+e);return this._remoteSelections.get(e)}}])&&r(t.prototype,o),s&&r(t,s),e}();t.RemoteSelectionManager=s},25282:function(e,t){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Validation=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,r;return t=e,r=[{key:"assertString",value:function(e,t){if("string"!=typeof e)throw new Error("".concat(t," must be a string but was: ").concat(e))}},{key:"assertNumber",value:function(e,t){if("number"!=typeof e)throw new Error("".concat(t," must be a number but was: ").concat(e))}},{key:"assertDefined",value:function(e,t){if(null==e)throw new Error("".concat(t," must be a defined but was: ").concat(e))}},{key:"assertFunction",value:function(e,t){if("function"!=typeof e)throw new Error("".concat(t," must be a function but was: ").concat(o(e)))}},{key:"assertPosition",value:function(t,o){if(e.assertDefined(t,o),"number"!=typeof t.lineNumber||"number"!=typeof t.column)throw new Error("".concat(o," must be an Object like {lineNumber: number, column: number}: ").concat(JSON.stringify(t)))}}],(i=null)&&n(t.prototype,i),r&&n(t,r),e}();t.Validation=i},71899:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(93398);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var i=o(24031);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var r=o(2818);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}))}}]);